$(window).on("load", () => {
  /** グリッド描画 ブロックごとに色分け */
  let trs = "";
  for (let i = 0; i < 9; i++) {
    let tds = "";
    for (let j = 0; j < 9; j++) {
      const cls = (Math.floor(i/3) + Math.floor(j/3))%2 < 1 ? "filled" : "";
      tds += `
        <td>
          <input id="cell_${i}_${j}" class="cell ${cls}" type="text" maxlength="1">
        </td>
      `;
    }
    trs += "<tr>" + tds + "</tr>";
  }
  $("table#grid")[0].innerHTML = trs;
});

$('[id^="sample_"]').on("click", (e) => {
  draw(samples[e.target.id]);
});

const samples = {
  sample_0: [
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0]
  ],
  sample_1: [
    [3,0,0,2,0,0,8,0,5],
    [0,0,0,6,7,0,0,0,0],
    [0,0,0,0,0,0,0,0,0],
    [0,8,0,0,0,5,4,0,6],
    [0,7,0,3,4,0,1,0,9],
    [1,6,4,0,2,9,5,3,7],
    [5,0,2,0,0,8,7,0,3],
    [6,9,8,0,3,7,0,5,4],
    [0,0,1,4,0,2,9,6,8]
  ],
  sample_2: [
    [0,7,0,1,6,9,0,0,0],
    [4,0,2,0,0,0,0,7,0],
    [0,0,1,0,0,0,0,0,0],
    [6,2,0,8,0,0,0,0,1],
    [9,0,0,4,7,0,0,0,8],
    [0,0,0,0,0,3,4,6,0],
    [0,0,0,0,0,0,0,1,7],
    [0,0,5,0,2,0,0,0,0],
    [0,0,0,6,5,7,0,0,0]
  ],
  sample_3: [
    [9,0,0,0,5,0,0,0,0],
    [0,8,3,0,0,0,0,0,0],
    [0,0,0,0,1,0,0,2,0],
    [0,0,0,0,0,0,0,5,2],
    [0,0,0,0,0,0,9,6,0],
    [0,0,7,4,0,0,0,0,0],
    [0,0,0,8,0,0,4,0,0],
    [0,0,0,3,0,7,0,0,0],
    [6,1,0,0,0,0,0,0,0]
  ]
}

const draw = (vals) => {
  for (let i = 0; i < 9; i++) {
    for (let j = 0; j < 9; j++) {
      $(`#cell_${i}_${j}`).val(vals[i][j] === 0 ? "" : vals[i][j]);
      $(`#cell_${i}_${j}`).removeClass("solved hinted");
    }
  }
}
